<link rel="import" href="../vt-core-elements/vt-model-element.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../paper-dialog/paper-dialog.html">
<link rel="import" href="../vt-toolbar-item/vt-toolbar-item.html">

<polymer-element name="vt-toolbar" extends="vt-model-element" attributes="status">
  <template>
    <link rel="stylesheet" href="vt-toolbar.css"/>
    <div horizontal layout center>
      <paper-icon-button on-click="{{toggleDevTools}}" icon="bug-report"></paper-icon-button>
      <div id="tools"></div>
      <paper-icon-button on-click="{{toggleToolsDialog}}" icon="add-circle-outline"></paper-icon-button>
    </div>
    <paper-dialog heading="Open tool..." id="dialog">
      <content id="toolbarItemsContent"></content>
    </paper-dialog>
  </template>
  <script type="text/javascript" src="../underscore/underscore.js"></script>
  <script>
    (function(){
      // var gui = require('nw.gui');

      Polymer('vt-toolbar',{
        domReady : function(){
          this.$.dialog.addEventListener('click_tool', function(ev){
            var clickedTool = ev.detail.tool;
            var toolItem = document.createElement('vt-toolbar-item');
            toolItem.tool = clickedTool;
            toolItem.icon = null;
            this.$.tools.appendChild(toolItem);
          }.bind(this));
        },
        toggleToolsDialog : function(){
          this.$.dialog.toggle();
        },
        toggleDevTools : function(){
          // var Window = gui.Window.get();
          // if(!Window.isDevToolsOpen())
          //   Window.showDevTools();
          // else
          //   Window.closeDevTools();
        }
      });
    })();
  </script>
</polymer-element>
